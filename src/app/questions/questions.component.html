<div class="grid grid-cols-1 lg:grid-cols-6">
    <div class="m-5 lg:col-start-2 lg:col-span-4" *ngIf="questions">
        <h1 *ngIf="topic">Topic: {{topic | titlecase}}</h1>

        <ng-container *ngIf="questions[currentQuestion]">
            <div class="flex flex-col my-5">
                <div class="flex justify-between">
                    <h1 class="!italic" color="primary">Question {{ currentQuestion + 1 }}</h1>
                    <h1 [ngClass]="{'text-red-600': counter === 0}">{{ counter > 0 ? counter : 'Time expired' }}</h1>
                </div>
    
                <mat-progress-bar mode="determinate" [value]="(currentQuestion + 1)*(100/questions.length)"></mat-progress-bar>
            </div>
            
            
            <h2>{{ questions[currentQuestion].text }}</h2>
    
            <mat-button-toggle-group
                class="w-full mb-3" 
                [vertical]="true"
                [value]="answers[currentQuestion]"
                (change)="chooseOption($event)"
                [disabled]="counter === 0">
                <mat-button-toggle 
                    *ngFor="let option of questions[currentQuestion].options" 
                    [value]="option.value">
                    <div class="flex justify-center items-center gap-3">
                        <p class="!m-0 whitespace-normal leading-6">
                            {{ option.text }}
                        </p>
                    </div>
                </mat-button-toggle>
            </mat-button-toggle-group>
    
            <div class="grid grid-cols-1 lg:grid-cols-3">
                <button 
                    mat-flat-button 
                    color="primary" 
                    class="lg:col-start-2 lg:col-span-1 mt-5" 
                    [disabled]="!answers[currentQuestion] && counter > 0"
                    (click)="nextQuestion()">
                    {{ currentQuestion < questions.length - 1 ? 'Next' : 'Finish' }}
                </button>
            </div>
            
        </ng-container>

        <ng-container *ngIf="quizCompleted">
            <ng-container *ngFor="let a of answers">
                <h3>{{ a !== '' ? a : 'non risposto' }}</h3>
            </ng-container>
            
        </ng-container>
    </div>
</div>
